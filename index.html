<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Borger ‚Äì Mit Overblik (Afg√∏relser) ¬∑ Standalone</title>
  <style>
    :root{
      --green:#166534; --green-600:#15803d;
      --slate-900:#0f172a; --slate-800:#1f2937; --slate-700:#334155; --slate-600:#475569; --slate-500:#64748b; --slate-100:#f1f5f9;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";background:var(--slate-100);color:var(--slate-900)}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    .topbar{background:var(--green);color:#fff}
    .topbar .bar{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .brand{font-weight:900;font-size:22px;letter-spacing:.2px}
    .note{border-bottom:1px solid #e2e8f0;background:#fff}
    .note .inner{color:var(--slate-700);font-size:14px;padding:10px 0;display:flex;gap:8px;align-items:center}
    h1{font-size:34px;margin:18px 0 8px}
    p.lead{margin:0 0 8px;color:var(--slate-700)}
    .grid{display:grid;gap:20px}
    @media(min-width:860px){.grid.cols-2{grid-template-columns:1fr 1fr}}
    .tile{display:flex;align-items:center;gap:18px;background:#fff;border:1px solid #e5e7eb;border-radius:10px;padding:20px 22px;min-height:112px;text-align:left;cursor:pointer;transition:.12s ease background}
    .tile:hover{background:#f8fafc}
    .tile .icon{width:44px;height:44px;border-radius:999px;background:var(--green);display:grid;place-items:center;color:#fff;flex:0 0 44px}
    .tile h3{margin:0;font-size:18px;letter-spacing:.5px;font-weight:900;text-transform:uppercase;color:#0f172a}
    .tile p{margin:6px 0 0;color:var(--slate-600)}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px}
    .card .hd{padding:16px 18px;border-bottom:1px solid #e5e7eb}
    .card .hd h2{margin:0 0 4px;font-size:18px}
    .card .hd .sub{margin:0;color:var(--slate-600);font-size:14px}
    .card .bd{padding:16px 18px}
    .stats{display:grid;gap:16px}
    @media(min-width:800px){.stats{grid-template-columns:repeat(3,1fr)}}
    .stat{display:flex;gap:12px;align-items:center;border:1px solid #e5e7eb;border-radius:10px;background:#fff;padding:14px}
    .stat .icon{width:40px;height:40px;border-radius:999px;background:var(--green);display:grid;place-items:center;color:#fff}
    .stat .k{font-size:11px;color:var(--slate-500);text-transform:uppercase}
    .stat .v{font-size:24px;font-weight:800;color:#0f172a}
    .filters{border:1px solid #e5e7eb;background:#fff;border-radius:10px;padding:14px;display:grid;gap:12px}
    @media(min-width:800px){.filters{grid-template-columns:2fr 1fr 1fr 1fr}}
    .form label{display:block;font-size:14px;color:#0f172a;margin:0 0 6px;font-weight:600}
    input, select, button{font:inherit}
    input[type=text], select{width:100%;border:1px solid #e5e7eb;border-radius:8px;padding:10px 12px}
    .btn{border:1px solid #e5e7eb;border-radius:8px;padding:10px 12px;background:#fff;cursor:pointer}
    .btn.primary{background:var(--green-600);border-color:var(--green-600);color:#fff}
    .btn.ghost{border:none;background:transparent;color:var(--slate-700)}
    .table{border:1px solid #e5e7eb;border-radius:12px;overflow:hidden}
    .tr.h{display:grid;grid-template-columns:2fr 3fr 2fr 1fr 1.5fr 1fr 1fr;gap:8px;background:#f1f5f9;padding:8px 12px;color:#64748b;font-size:12px}
    .tr.r{display:grid;grid-template-columns:2fr 3fr 2fr 1fr 1.5fr 1fr 1fr;gap:8px;padding:10px 12px;border-top:1px solid #e5e7eb;background:#fff;align-items:center}
    .tr.r:hover{background:#f8fafc}
    .badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;border:1px solid #e5e7eb;background:#fff}
    .badge.ok{background:#dcfce7;border-color:#86efac;color:#14532d}
    .badge.warn{background:#fee2e2;border-color:#fecaca;color:#7f1d1d}
    .right{display:flex;justify-content:flex-end}
    .kv{display:grid;grid-template-columns:180px 1fr;gap:12px;font-size:14px;margin:10px 0}
    .kv .k{color:#475569}
    .row{display:grid;gap:18px}
    @media(min-width:980px){.row{grid-template-columns:2fr 1fr}}
    .spacer{height:12px}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#111827;color:#fff;font-size:12px}
    .actions{display:flex;flex-wrap:wrap;gap:10px;padding-top:8px}
    .btn.icon{display:inline-flex;gap:8px;align-items:center}
    .small{font-size:12px;color:#64748b}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container bar">
      <div class="brand">borger.dk</div>
      <div class="small">Mit Overblik</div>
    </div>
  </header>
  <div class="note">
    <div class="container inner">Hvad er Mit Overblik?</div>
  </div>

  <main class="container" id="app"></main>

  <footer class="container" style="padding:20px 0 40px;color:var(--slate-600);font-size:14px">
    ¬© <span id="year"></span> borger.dk (mockup) ¬∑ Standalone HTML
  </footer>

  <script>
    const state = {
      view: 'home',
      selected: null,
      data: [
        { id:'A-2025-00102', titel:'K√∏restol som hj√¶lpemiddel', lov:'SEL ¬ß 112', type:'Fuld bevilling', status:'Aktiv', dato:'2025-03-12', klagefrist:'2025-04-09', dokument:'DOC-8897', omraade:'Hj√¶lpemidler', kommune:'[Kommune]', bevStart:'2025-04-01', bevSlut:'2027-03-31', ydelse:'K√∏restol (hj√¶lpemiddel)' },
        { id:'A-2024-00971', titel:'Merudgifter', lov:'SEL ¬ß 100', type:'√Ündring ned', status:'Aktiv', dato:'2024-12-01', klagefrist:'2024-12-29', dokument:'DOC-7110', omraade:'Voksne ‚Äì kompensation', kommune:'[Kommune]', bevStart:'2024-12-01', bevSlut:'', ydelse:'Tilskud til merudgifter' },
        { id:'A-2024-00411', titel:'Anbringelse ‚Äì valg af anbringelsessted', lov:'BL ¬ß 52', type:'Forts√¶ttelse', status:'Under klage', dato:'2024-09-14', klagefrist:'2024-10-12', dokument:'DOC-3021', omraade:'B√∏rn og unge', kommune:'[Kommune]', bevStart:'2024-10-01', bevSlut:'2025-03-31', ydelse:'Anbringelse (valg af sted)' },
        { id:'A-2023-00200', titel:'Genoptr√¶ning ‚Äì vedligeholdelse', lov:'SEL ¬ß 86', type:'Fuld bevilling', status:'Udl√∏bet', dato:'2023-05-03', klagefrist:'2023-05-31', dokument:'JN-5512', omraade:'Rehabilitering', kommune:'[Kommune]', bevStart:'2023-05-15', bevSlut:'2023-08-31', ydelse:'Vedligeholdelsestr√¶ning' }
      ]
    };

    function parseISODateLocal(dateStr){
      const [y,m,d] = (dateStr||'').split('-').map(n=>parseInt(n,10));
      if(!y||!m||!d) return new Date(NaN);
      return new Date(y, m-1, d, 0, 0, 0, 0);
    }
    function daysUntil(dateStr){
      const d = parseISODateLocal(dateStr);
      const today = new Date(); today.setHours(0,0,0,0);
      return Math.ceil((d - today) / 86400000);
    }
    function formatPeriode(start,end){
      if(!start && !end) return '‚Äî';
      const s = start && start.length ? start : '‚Äî';
      const e = end && end.length ? end : '√•ben';
      return `${s} ‚Äì ${e}`;
    }

    function h(strings,...vals){return strings.reduce((a,s,i)=>a+s+(vals[i]??''),'')}

    function render(){
      const root = document.getElementById('app');
      root.innerHTML = state.view==='home' ? renderHome() : renderAfgorelser();
      attachHandlers();
    }

    function renderHome(){
      return h`
        <h1>Mit Overblik</h1>
        <p class="lead">Mit Overblik er din personlige side. Her kan du se dine oplysninger fra forskellige offentlige myndigheder.</p>
        <div class="grid cols-2">
          ${tile('üë§','Personlige oplysninger','Oplysninger om CPR, adresse, civilstand, statsborgerskab, m.m.')}
          ${tile('‚öñÔ∏è','Indkomst og skat','Indkomst, skattekort og √•rsopg√∏relse')}
          ${tile('üí∂','√òkonomiske ydelser','Udbetalinger af uddannelseshj√¶lp, kontanthj√¶lp, sygedagpenge, ledighedsydelse m.m.')}
          ${tile('üí≥','Betalinger og g√¶ld','Betalinger og g√¶ld til Udbetaling Danmark og kommunen, fx boligst√∏tte, familieydelser, tilbagebetaling m.m.')}
          ${tile('üóÇÔ∏è','Sager','Status p√• sager og ans√∏gninger')}
          ${tile('üõ°Ô∏è','Serviceydelser og hj√¶lpemidler','Bevilget reng√∏ring, hjemmehj√¶lp, sociale tilbud, stokke, k√∏restol, rollator m.m.')}
          ${tile('üìÑ','Beviser','Uddannelsesbeviser og godkendelser som faglig ansvarlig')}
          ${tile('üìÖ','Aftaler og frister','Indkaldelser, m√∏detidspunkter og frister for aftaler.')}
          ${tile('‚úÖ','Afg√∏relser','Overblik over dine afg√∏relser ‚Äì klik for at se status, klagefrister og dokumenter.', 'go-afgoerelser')}
        </div>
      `;
    }

    function tile(emoji, title, desc, id){
      return h`<button class="tile" ${id?`id="${id}"`:''}>
        <div class="icon" aria-hidden="true">${emoji}</div>
        <div class="flex-1">
          <h3>${title}</h3>
          <p>${desc}</p>
        </div>
      </button>`
    }

    function renderAfgorelser(){
      const aktive = state.data.filter(a=>a.status==='Aktiv').length;
      const underKlage = state.data.filter(a=>a.status==='Under klage').length;
      const fristNaer = state.data.filter(a=>{const d=daysUntil(a.klagefrist);return d>=0 && d<=7}).length;
      const sel = state.selected || state.data[0];
      state.selected = sel;

      return h`
        <div class="small" style="margin:12px 0"><a href="#" id="back">‚Üê Mit Overblik</a> ‚Ä∫ <span style="font-weight:600">Afg√∏relser</span></div>
        <h1>Afg√∏relser</h1>
        <p class="lead">Her kan du se dine afg√∏relser fra kommunen og relevante oplysninger som klagefrister, status og henvisning til dokumenter. Du kan ogs√• hoppe til dine relaterede aftaler.</p>
        <div class="stats" style="margin-top:16px">
          ${stat('Aktive afg√∏relser', aktive, '‚úÖ')}
          ${stat('Under klage', underKlage, '‚öñÔ∏è')}
          ${stat('Klagefrist inden 7 dage', fristNaer, 'üìÖ')}
        </div>

        <div class="filters" style="margin-top:16px">
          <div class="form"><label>S√∏g</label><input type="text" id="q" placeholder="S√∏g p√• titel, lov, id‚Ä¶"/></div>
          <div class="form"><label>√Ör</label><select id="year"><option value="">Alle</option><option>2025</option><option>2024</option><option>2023</option></select></div>
          <div class="form"><label>Status</label><select id="status"><option value="">Alle</option><option>Aktiv</option><option>Under klage</option><option>Udl√∏bet</option></select></div>
          <div class="form" style="display:flex;gap:8px;align-items:flex-end"><button class="btn ghost" id="reset">Nulstil</button><button class="btn primary" id="apply">Vis</button></div>
        </div>

        <div class="card" style="margin-top:16px">
          <div class="hd"><h2>Oversigt</h2><p class="sub">Liste over dine afg√∏relser. V√¶lg en linje for at se detaljer, dokument og muligheder for klage.</p></div>
          <div class="bd" id="table-wrap">
            ${renderTable(state.data)}
          </div>
        </div>

        <div class="row" style="margin-top:18px">
          <div class="card">
            <div class="hd"><h2>${sel.titel}</h2><p class="sub">${sel.id} ¬∑ ${sel.omraade}</p></div>
            <div class="bd">
              <div class="kv"><div class="k">Lovgrundlag</div><div>${sel.lov}</div></div>
              <div class="kv"><div class="k">Dato for afg√∏relse</div><div>${sel.dato}</div></div>
              <div class="kv"><div class="k">Status</div><div><span class="pill">${sel.status}</span></div></div>
              <div class="kv"><div class="k">Afg√∏relsestype</div><div>${sel.type}</div></div>
              <div class="kv"><div class="k">Bevillingsperiode</div><div>${formatPeriode(sel.bevStart, sel.bevSlut)}${sel.ydelse?` ¬∑ ${sel.ydelse}`:''}</div></div>
              <div class="kv"><div class="k">Klagefrist</div><div>${sel.klagefrist} (${daysUntil(sel.klagefrist)} dage)</div></div>
              <div class="actions">
                <button class="btn icon" data-doc="${sel.dokument}" id="see-doc">üìÑ Se dokument (${sel.dokument})</button>
                <button class="btn icon" data-doc="${sel.dokument}" id="dl-doc">‚¨áÔ∏è Download afg√∏relsesbrev (PDF)</button>
                <button class="btn icon">üßæ Indsend klage</button>
                <button class="btn icon">‚ÑπÔ∏è L√¶s om dine rettigheder</button>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="hd"><h2>Relaterede aftaler</h2><p class="sub">M√∏der og frister som knytter sig til denne afg√∏relse.</p></div>
            <div class="bd">
              ${appt('2025-03-28 10:00','Opstartsm√∏de om hj√¶lpemiddel','R√•dhuset, lokale 3')}
              ${appt('2025-04-07 12:30','Telefonm√∏de ‚Äì klagevejledning','Vi ringer dig op')}
              ${appt('2025-04-09 23:59','Sidste frist for klage','Digital indsendelse')}
              <div class="spacer"></div>
              <button class="btn" style="width:100%">Se alle aftaler</button>
            </div>
          </div>
        </div>
      `;
    }

    function stat(label,val,emoji){
      return h`<div class="stat"><div class="icon" aria-hidden="true">${emoji}</div><div><div class="k">${label}</div><div class="v">${val}</div></div></div>`
    }
    function appt(when,what,where){
      return h`<div class="card" style="border-radius:8px;margin:8px 0 0"><div class="bd" style="padding:10px 12px"><div style="font-weight:600">${what}</div><div class="small" style="margin-top:4px">${when} ¬∑ ${where}</div></div></div>`
    }

    function renderTable(rows){
      return h`
        <div class="table">
          <div class="tr h">
            <div>Afg√∏relse</div><div>Emne</div><div>Lovgrundlag</div><div>Dato</div><div>Status</div><div>Klagefrist</div><div style="text-align:right;padding-right:6px">Afg√∏relsesbrev</div>
          </div>
          ${rows.map(r => h`<div class="tr r" data-id="${r.id}">
            <div style="font-weight:600">${r.id}</div>
            <div class="ellipsis">${r.titel}</div>
            <div>${r.lov}</div>
            <div>${r.dato}</div>
            <div>${badge(r.status)}</div>
            <div>${r.klagefrist} ${daysUntil(r.klagefrist)>=0?`<span class='small'>(om ${daysUntil(r.klagefrist)} dage)</span>`:''}</div>
            <div class="right"><button class="btn" data-dl="${r.dokument}" title="Download afg√∏relsesbrev">‚¨áÔ∏è</button></div>
          </div>`).join('')}
        </div>`
    }

    function badge(status){
      const cls = status==='Under klage' ? 'warn' : (status==='Udl√∏bet' ? '' : 'ok');
      return `<span class="badge ${cls}">${status}</span>`
    }

    function attachHandlers(){
      const go = document.getElementById('go-afgoerelser');
      if(go) go.addEventListener('click', ()=>{state.view='afgoerelser'; render()});
      const back = document.getElementById('back');
      if(back) back.addEventListener('click', (e)=>{e.preventDefault(); state.view='home'; render()});

      document.querySelectorAll('.tr.r').forEach(row=>{
        row.addEventListener('click', ()=>{
          const id = row.getAttribute('data-id');
          const sel = state.data.find(r=>r.id===id);
          state.selected = sel; render();
        })
      });

      document.querySelectorAll('[data-dl]').forEach(btn=>{
        btn.addEventListener('click', (e)=>{ e.stopPropagation(); downloadDoc(btn.getAttribute('data-dl')); });
      });
      const dl = document.getElementById('dl-doc');
      if(dl) dl.addEventListener('click', ()=>downloadDoc(dl.getAttribute('data-doc')));
      const see = document.getElementById('see-doc');
      if(see) see.addEventListener('click', ()=>downloadDoc(see.getAttribute('data-doc')));

      const q = document.getElementById('q'), year=document.getElementById('year'), st=document.getElementById('status');
      const apply=document.getElementById('apply'), reset=document.getElementById('reset');
      if(apply) apply.addEventListener('click', ()=>{
        const rows = state.data.filter(r=>{
          const okQ = !q.value || `${r.id} ${r.titel} ${r.lov}`.toLowerCase().includes(q.value.toLowerCase());
          const okY = !year.value || (r.dato||'').startsWith(year.value);
          const okS = !st.value || r.status===st.value;
          return okQ && okY && okS;
        });
        document.getElementById('table-wrap').innerHTML = renderTable(rows);
        attachHandlers();
      });
      if(reset) reset.addEventListener('click', ()=>{ q.value=''; year.value=''; st.value=''; document.getElementById('table-wrap').innerHTML = renderTable(state.data); attachHandlers(); });
    }

    function downloadDoc(docId){
      const sel = state.selected || state.data[0];
      const content = `Afg√∏relsesbrev (demo)\nDokument: ${docId}\nAfg√∏relse: ${sel.id} ‚Äì ${sel.titel}\nLov: ${sel.lov}\nDato: ${sel.dato}`;
      const blob = new Blob([content], {type:'text/plain'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = `${docId}.txt`;
      document.body.appendChild(a); a.click(); a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href), 2000);
    }

    document.getElementById('year').textContent = new Date().getFullYear();
    render();
  </script>
</body>
</html>
